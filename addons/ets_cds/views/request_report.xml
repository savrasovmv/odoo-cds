<?xml version="1.0"?>
<odoo>

    

        <template id="cds_report_style">
            <style type="text/css">
                .page {
                    width: 100%;
                    line-height: 14px;
                }
                table {
                    width: 100%;
                    border-collapse: collapse;
                    font-size: 18px;
                }

                td {

                        border-color:black !important;
                        border: 2px solid black;
                        padding: 5px !important;;
                    }

                .td-50 {
                    width: 50%;
                }

                .text-center {
                    text-align: center !important;
                }

                h4 {
                    line-height: 10px; !important;
                    margin-block: 8px;
                }
            </style>
		</template>

    <template id="request_report">
        
        <t t-call="web.html_container">  
            <t t-foreach="docs" t-as="o">
                <div class="page">
                <t t-call="ets_cds.cds_report_style"/>
                
                    <div class="text-center">

                        <div style="font-weight: bold;"> Заявка № <t t-esc="o.name"/> </div>
                        <div style="font-weight: bold;"> на отключение (включение) оборудования </div>
                        <div style="font-weight: bold;"> <t t-esc="o.company_partner_id.name"/> </div>

                    </div>

                    <table class="table table-border-black">
                        <tbody >
                            <tr >
                                <td class="td-50"> 
                                    Вид (плановая, внеплановая, аварийная):
                                </td>
                                <td> 
                                    <span t-field="o.mode"/>
                                </td>
                            </tr>
                            <tr >
                                <td class="td-50"> 
                                    Дата передачи
                                </td>
                                <td> 
                                    <t t-set="date_hand_over" t-value="o.date_hand_over"/>
                                    context_timestamp(<t t-esc="o.date_hand_over"/>)
                                    <!-- 2021-12-16 15:46:25 -->
                                    <!-- <span t-esc="context_timestamp(datetime.datetime.strptime(o.date_hand_over, '%Y-%m-%d %H:%M:%S')).strftime('%Y-%m-%d %H:%M')"/> -->
                                </td>
                            </tr>
                        </tbody>
                    </table>



                </div>

            </t>

        </t>

            <!-- <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>Report title</h2>
                        <p>This object's name is <span t-field="o.name"/></p>
                    </div>
                </t>
            </t> -->
    </template>



    <record id="action_print_request" model="ir.actions.report">
        <field name="name">Зявка</field>
        <field name="model">cds.request</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">ets_cds.request_report</field>
        <field name="report_file">ets_cds.request_report</field>
        <field name="print_report_name">'Зявка - %s' % (object.name)</field>
        <field name="binding_model_id" ref="model_cds_request"/>
        <field name="paperformat_id" ref="ets_cds.paperformat_lowmargin" />
    </record>



    

    <!-- <record id="ets_cds.request_report" model="ir.actions.report.xml">
        <field name="paperformat_id" ref="ets_cds.paperformat_lowmargin" />
    </record> -->

</odoo>